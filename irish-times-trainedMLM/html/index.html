<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Irish Times Style Checker</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body class="container mt-5">
  <img src="/static/signature1.png" alt="Image" class="d-block mx-auto" style="max-width: 600px;">
  <h1 class="mb-1 d-flex justify-content-center" style="color: #74bfd2">üóûÔ∏èIrish Times Style CheckerüóûÔ∏è</h1>
  <i class="mb-2 d-flex justify-content-center" style="color: #74bfd2">The lower the number, the more the headline matches the Irish Times style!!!</i>

  <div>
    <textarea
      id="newsText"
      class="form-control"
      rows="8"
      placeholder="Paste a headline to check how likely it's written by the Irish Times!!!"
    ></textarea>
  </div>

  <div id="resultContainer" class="mt-4" style="display: none;">
    <div id="result" class="alert"></div>
  </div>

  <div class="d-flex justify-content-center">
    <button
      class="btn btn-primary btn-lg mt-2"
      onclick="checkLikelihood()"
      type="button"
      style="background-color: #74bfd2; border-color: #74bfd2; color: white;">
      Evaluate
    </button>
  </div>

  <div class="d-flex" style="margin-top: 50px">
    <button
      class="btn btn-primary btn-sm"
      onclick="window.open('https://www.kaggle.com/datasets/manhdodz249/irish-times-dataset-for-topic-model/data?select=new_IrishTimes_train.txt')"
      type="button"
      style="background-color: #74bfd2; border-color: #74bfd2; color: white;">
      Link to dataset used on kaggle by manhdo_fts03
    </button>
  </div>

    <div class="d-flex" style="margin-top: 5px">
    <button
      class="btn btn-primary btn-sm"
      onclick="window.open('https://github.com/ShammirCortez/Projects')"
      type="button"
      style="background-color: #74bfd2; border-color: #74bfd2; color: white;">
      Link to my Github
    </button>
  </div>

  <script>
    async function checkLikelihood() {
      const text = document.getElementById("newsText").value.trim();
      if (!text) {
        alert("Please enter a headline");
        return;
      }
      try {
        const response = await fetch("http://127.0.0.1:8000/predict", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ text }),
        });

        const data = await response.json();
        const resultDiv = document.getElementById("result");
        const container = document.getElementById("resultContainer");

        const score = data.score;
        let message = `MLM Score: ${score.toFixed(3)}, `;

          if (score < 2.0) {
          resultDiv.className = "alert alert-success";
          message += "Written in Irish Times style.";
        } else if (score < 3.0) {
          resultDiv.className = "alert alert-warning";
          message += "Somewhat likely written to match Irish Times style.";
        } else {
          resultDiv.className = "alert alert-danger";
          message += "Unlikely to be written in Irish Times style.";
        }

        resultDiv.textContent = message;
        container.style.display = "block";
      } catch (error) {
        alert("Error: " + error);
      }
    }
  </script>
</body>
</html>
